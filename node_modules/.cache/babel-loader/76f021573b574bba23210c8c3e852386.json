{"ast":null,"code":"import * as d3 from 'd3';\nconst parseTime = d3.timeParse('%d/%m/%y');\nlet chart = {},\n    x,\n    y,\n    line,\n    width,\n    height,\n    g;\n\nchart.create = (el, props, state) => {\n  const margin = {\n    top: 20,\n    right: 20,\n    bottom: 30,\n    left: 50\n  };\n  let svg = d3.select(el).append('svg').attr('class', 'chart').attr('width', props.width).attr('height', props.height);\n  width = svg.attr('width') - margin.left - margin.right;\n  height = svg.attr('height') - margin.top - margin.bottom;\n  g = svg.append('g').attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n  x = d3.scaleTime().rangeRound([0, width]);\n  y0 = d3.scaleLinear().rangeRound([height, 0]);\n  y1 = d3.scaleLinear().rangeRound([height, 0]);\n  line0 = d3.line().x(function (d) {\n    return x(d.Date);\n  }).y(function (d) {\n    return y0(d.Weekly_ICSA);\n  });\n  line1 = d3.line().x(function (d) {\n    return x(d.Date);\n  }).y(function (d) {\n    return y1(d.Weekly_New_Cases);\n  });\n  chart.update(state);\n};\n\nchart.update = state => {\n  let svg = d3.select('svg');\n  chart.draw(svg, state.data, state.title);\n};\n\nchart.draw = function (svg, data, title) {\n  this.cleanUp();\n  data.forEach(function (d) {\n    d.Date = parseTime(d.Date);\n    d.Weekly_ICSA = +d.Weekly_ICSA;\n    d.Weekly_New_Cases = +d.Weekly_New_Cases;\n    return d;\n  });\n  x.domain(d3.extent(data, function (d) {\n    return d.Date;\n  }));\n  y0.domain([0, d3.max(data, function (d) {\n    return d.Weekly_ICSA;\n  })]);\n  y1.domain([0, d3.max(data, function (d) {\n    return d.Weekly_New_Cases;\n  })]); // Add axis:\n\n  g.append('g').attr('class', 'x-axis').attr('transform', 'translate(0,' + height + ')').call(d3.axisBottom(x).ticks(d3.timeMonth.every(3)));\n  g.append('g').attr('class', 'y-axis').call(d3.axisLeft(y0)).append('text').attr('fill', 'steelblue').attr('transform', 'rotate(-90)').attr('y', 6).attr('dy', '0.71em').attr('text-anchor', 'end').text('Weekly ICSA');\n  g.append('g').attr('class', 'y-axis').call(d3.axisRight(y1)).append('text').attr('fill', 'red').attr('transform', 'rotate(-90)').attr('y', 6).attr('dy', '0.71em').attr('text-anchor', 'end').text('Weekly New Case'); // Add path:\n\n  g.append('path').attr('class', function (d) {\n    return \"icsa\";\n  }).datum(data).attr('fill', 'none').attr('stroke', 'steelblue').attr('stroke-linejoin', 'round').attr('stroke-linecap', 'round').attr('stroke-width', 1.5).attr('d', line0);\n  g.append('path').attr('class', function (d) {\n    return \"newcase\";\n  }).datum(data).attr('fill', 'none').attr('stroke', 'red').attr('stroke-linejoin', 'round').attr('stroke-linecap', 'round').attr('stroke-width', 1.5).attr('d', line1); // Add tooltip\n\n  var tooltip = g.append(\"div\").style(\"opacity\", 0).attr(\"class\", \"tooltip\").style(\"background-color\", \"grey\").style(\"border-radius\", \"5px\").style(\"padding\", \"10px\").style(\"color\", \"white\");\n\n  var showICSATooltip = function (d) {\n    tooltip.transition().duration(200);\n    tooltip.style(\"opacity\", 1).html(\"Weekly ICSA: \" + d.Weekly_ICSA).style(\"left\", d3.event.pageX + \"px\").style(\"top\", d3.event.pageY - 28 + \"px\");\n  };\n\n  var showNewCaseTooltip = function (d) {\n    tooltip.transition().duration(200);\n    tooltip.style(\"opacity\", 1).html(\"Weekly New Cases: \" + d.Weekly_New_Cases).style(\"left\", d3.event.pageX + \"px\").style(\"top\", d3.event.pageY - 28 + \"px\");\n  };\n\n  var moveTooltip = function (d) {\n    tooltip.style(\"left\", d3.event.pageX + \"px\").style(\"top\", d3.event.pageY - 28 + \"px\");\n  };\n\n  var hideTooltip = function (d) {\n    tooltip.transition().duration(200).style(\"opacity\", 0);\n  }; // Add circle:\n\n\n  g.append('circle').attr('class', function (d) {\n    return \"icsa\";\n  }).datum(data).attr(\"cx\", function (d) {\n    return x(d.Date);\n  }).attr(\"cy\", function (d) {\n    return y0(d.Weekly_ICSA);\n  }).attr(\"r\", 5).attr(\"stroke\", \"white\").style(\"fill\", \"steelblue\").on(\"mouseover\", showICSATooltip).on(\"mousemove\", moveTooltip).on(\"mouseleave\", hideTooltip);\n  g.append('circle').attr('class', function (d) {\n    return \"newcase\";\n  }).datum(data).attr(\"cx\", function (d) {\n    return x(d.Date);\n  }).attr(\"cy\", function (d) {\n    return y1(d.Weekly_New_Cases);\n  }).attr(\"r\", 5).attr(\"stroke\", \"white\").style(\"fill\", \"red\").on(\"mouseover\", showNewCaseTooltip).on(\"mousemove\", moveTooltip).on(\"mouseleave\", hideTooltip); // Add legend\n\n  g.append(\"circle\").attr(\"cx\", 465).attr(\"cy\", 30).attr(\"r\", 6).style(\"fill\", \"steelblue\");\n  g.append(\"circle\").attr(\"cx\", 465).attr(\"cy\", 50).attr(\"r\", 6).style(\"fill\", \"red\");\n  g.append(\"text\").attr(\"x\", 475).attr(\"y\", 30).text(\"Weekly ICSA\").style(\"font-size\", \"15px\").attr(\"alignment-baseline\", \"middle\");\n  g.append(\"text\").attr(\"x\", 475).attr(\"y\", 50).text(\"Weekly new case\").style(\"font-size\", \"15px\").attr(\"alignment-baseline\", \"middle\"); // Add title\n\n  g.append('text').attr('class', 'chart-title').attr('x', width / 2).attr('y', 0).attr('text-anchor', 'middle').style('font-size', '16px').text(title);\n};\n\nchart.cleanUp = function (el) {\n  d3.selectAll('.x-axis').remove();\n  d3.selectAll('.y-axis').remove();\n  d3.selectAll('.chart-title').remove();\n  d3.selectAll('.icsa').remove();\n  d3.selectAll('.newcase').remove();\n};\n\nexport default chart;","map":{"version":3,"sources":["/Users/rubychan/covidapp/src/ChartD3.js"],"names":["d3","parseTime","timeParse","chart","x","y","line","width","height","g","create","el","props","state","margin","top","right","bottom","left","svg","select","append","attr","scaleTime","rangeRound","y0","scaleLinear","y1","line0","d","Date","Weekly_ICSA","line1","Weekly_New_Cases","update","draw","data","title","cleanUp","forEach","domain","extent","max","call","axisBottom","ticks","timeMonth","every","axisLeft","text","axisRight","datum","tooltip","style","showICSATooltip","transition","duration","html","event","pageX","pageY","showNewCaseTooltip","moveTooltip","hideTooltip","on","selectAll","remove"],"mappings":"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","sourcesContent":["\nimport * as d3 from 'd3';\n\nconst parseTime = d3.timeParse('%d/%m/%y');\n\nlet chart = {},\n    x, y,\n    line,\n    width,\n    height,\n    g;\n\nchart.create = (el, props, state) => {\n    const margin = { top: 20, right: 20, bottom: 30, left: 50 };\n\n    let svg = d3.select(el).append('svg')\n        .attr('class', 'chart')\n        .attr('width', props.width)\n        .attr('height', props.height);\n\n    width = svg.attr('width') - margin.left - margin.right;\n    height = svg.attr('height') - margin.top - margin.bottom;\n\n    g = svg.append('g').attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n    x = d3.scaleTime().rangeRound([0, width]);\n    y0 = d3.scaleLinear().rangeRound([height, 0]);\n    y1 = d3.scaleLinear().rangeRound([height, 0]);\n\n    line0 = d3.line()\n        .x(function (d) { return x(d.Date); })\n        .y(function (d) { return y0(d.Weekly_ICSA); });\n\n    line1 = d3.line()\n        .x(function (d) { return x(d.Date); })\n        .y(function (d) { return y1(d.Weekly_New_Cases); });\n\n\n    chart.update(state);\n}\n\nchart.update = (state) => {\n    let svg = d3.select('svg');\n\n    chart.draw(svg, state.data, state.title);\n}\n\nchart.draw = function (svg, data, title) {\n    this.cleanUp();\n\n    data.forEach(function (d) {\n        d.Date = parseTime(d.Date);\n        d.Weekly_ICSA = +d.Weekly_ICSA;\n        d.Weekly_New_Cases = +d.Weekly_New_Cases;\n        return d;\n    });\n\n    x.domain(d3.extent(data, function (d) { return d.Date; }));\n    y0.domain([0, d3.max(data, function (d) { return d.Weekly_ICSA; })]);\n    y1.domain([0, d3.max(data, function (d) { return d.Weekly_New_Cases; })]);\n\n    // Add axis:\n    g.append('g')\n        .attr('class', 'x-axis')\n        .attr('transform', 'translate(0,' + height + ')')\n        .call(d3.axisBottom(x).ticks(d3.timeMonth.every(3)));\n\n    g.append('g')\n        .attr('class', 'y-axis')\n        .call(d3.axisLeft(y0))\n        .append('text')\n        .attr('fill', 'steelblue')\n        .attr('transform', 'rotate(-90)')\n        .attr('y', 6)\n        .attr('dy', '0.71em')\n        .attr('text-anchor', 'end')\n        .text('Weekly ICSA');\n\n    g.append('g')\n        .attr('class', 'y-axis')\n        .call(d3.axisRight(y1))\n        .append('text')\n        .attr('fill', 'red')\n        .attr('transform', 'rotate(-90)')\n        .attr('y', 6)\n        .attr('dy', '0.71em')\n        .attr('text-anchor', 'end')\n        .text('Weekly New Case');\n\n    // Add path:\n    g.append('path')\n        .attr('class', function (d) { return \"icsa\"; })\n        .datum(data)\n        .attr('fill', 'none')\n        .attr('stroke', 'steelblue')\n        .attr('stroke-linejoin', 'round')\n        .attr('stroke-linecap', 'round')\n        .attr('stroke-width', 1.5)\n        .attr('d', line0);\n\n    g.append('path')\n        .attr('class', function (d) { return \"newcase\"; })\n        .datum(data)\n        .attr('fill', 'none')\n        .attr('stroke', 'red')\n        .attr('stroke-linejoin', 'round')\n        .attr('stroke-linecap', 'round')\n        .attr('stroke-width', 1.5)\n        .attr('d', line1);\n\n    // Add tooltip\n    var tooltip = g\n        .append(\"div\")\n        .style(\"opacity\", 0)\n        .attr(\"class\", \"tooltip\")\n        .style(\"background-color\", \"grey\")\n        .style(\"border-radius\", \"5px\")\n        .style(\"padding\", \"10px\")\n        .style(\"color\", \"white\")\n\n    var showICSATooltip = function (d) {\n        tooltip\n            .transition()\n            .duration(200)\n        tooltip\n            .style(\"opacity\", 1)\n            .html(\"Weekly ICSA: \" + d.Weekly_ICSA)\n            .style(\"left\", (d3.event.pageX) + \"px\")\n            .style(\"top\", (d3.event.pageY - 28) + \"px\");\n    }\n\n    var showNewCaseTooltip = function (d) {\n        tooltip\n            .transition()\n            .duration(200)\n        tooltip\n            .style(\"opacity\", 1)\n            .html(\"Weekly New Cases: \" + d.Weekly_New_Cases)\n            .style(\"left\", (d3.event.pageX) + \"px\")\n            .style(\"top\", (d3.event.pageY - 28) + \"px\");\n    }\n\n    var moveTooltip = function (d) {\n        tooltip\n            .style(\"left\", (d3.event.pageX) + \"px\")\n            .style(\"top\", (d3.event.pageY - 28) + \"px\");\n    }\n\n    var hideTooltip = function (d) {\n        tooltip\n            .transition()\n            .duration(200)\n            .style(\"opacity\", 0)\n    }\n\n    // Add circle:\n    g.append('circle')\n        .attr('class', function (d) { return \"icsa\"; })\n        .datum(data)\n        .attr(\"cx\", function (d) { return x(d.Date); })\n        .attr(\"cy\", function (d) { return y0(d.Weekly_ICSA); })\n        .attr(\"r\", 5)\n        .attr(\"stroke\", \"white\")\n        .style(\"fill\", \"steelblue\")\n        .on(\"mouseover\", showICSATooltip)\n        .on(\"mousemove\", moveTooltip)\n        .on(\"mouseleave\", hideTooltip)\n\n    g.append('circle')\n        .attr('class', function (d) { return \"newcase\"; })\n        .datum(data)\n        .attr(\"cx\", function (d) { return x(d.Date); })\n        .attr(\"cy\", function (d) { return y1(d.Weekly_New_Cases); })\n        .attr(\"r\", 5)\n        .attr(\"stroke\", \"white\")\n        .style(\"fill\", \"red\")\n        .on(\"mouseover\", showNewCaseTooltip)\n        .on(\"mousemove\", moveTooltip)\n        .on(\"mouseleave\", hideTooltip)\n\n    // Add legend\n    g.append(\"circle\").attr(\"cx\", 465).attr(\"cy\", 30).attr(\"r\", 6).style(\"fill\", \"steelblue\")\n    g.append(\"circle\").attr(\"cx\", 465).attr(\"cy\", 50).attr(\"r\", 6).style(\"fill\", \"red\")\n    g.append(\"text\").attr(\"x\", 475).attr(\"y\", 30).text(\"Weekly ICSA\").style(\"font-size\", \"15px\").attr(\"alignment-baseline\", \"middle\")\n    g.append(\"text\").attr(\"x\", 475).attr(\"y\", 50).text(\"Weekly new case\").style(\"font-size\", \"15px\").attr(\"alignment-baseline\", \"middle\")\n\n    // Add title\n    g.append('text')\n        .attr('class', 'chart-title')\n        .attr('x', (width / 2))\n        .attr('y', 0)\n        .attr('text-anchor', 'middle')\n        .style('font-size', '16px')\n        .text(title);\n}\n\nchart.cleanUp = function (el) {\n    d3.selectAll('.x-axis').remove();\n    d3.selectAll('.y-axis').remove();\n    d3.selectAll('.chart-title').remove();\n    d3.selectAll('.icsa').remove();\n    d3.selectAll('.newcase').remove();\n};\n\nexport default chart;"]},"metadata":{},"sourceType":"module"}